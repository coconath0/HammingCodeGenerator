## -*- texinfo -*-
## @deftypefn  {} {} dummy()
##
## This is a dummy function documentation. This file have a lot functions
## and each one have a little documentation. This text is to avoid a warning when
## install this file as part of package.
## @end deftypefn
##
## Set the graphics toolkit and force read this file as script file (not a function file).
##
graphics_toolkit qt;
##


##
##
## Begin callbacks definitions 
##

## @deftypefn  {} {} Button_1_doIt (@var{src}, @var{data}, @var{CodHam})
##
## Define a callback for default action of Button_1 control.
##
## @end deftypefn
function Button_1_doIt(src, data, CodHam)

pkg load arduino;
a = arduino;
num1 = get(CodHam.D1,'String');%recibe num
num3 = get(CodHam.D2,'String');
num5 = get(CodHam.D3,'String');
num7 = get(CodHam.D4,'String');
num9 = get(CodHam.D5,'String');
num11 = get(CodHam.D6,'String');
num13 = get(CodHam.D7,'String');

num2 = str2num(num1);%convierte num
num4 = str2num(num3);
num6 = str2num(num5);
num8 = str2num(num7);
num10 = str2num(num9);
num12 = str2num(num11);
num14 = str2num(num13);
mensaje =""
%set(CodHam.msj1, 'String', mensaje);
%Ahora, esos números obtenidos lo ponemos en una cadena
if((num2!= 1 && num2!=0)||(num4!= 1 && num4!=0)||(num6!= 1 && num6!=0)||(num8!= 1 && num8!=0)||(num10!= 1 && num10!=0)||(num12!= 1 && num12!=0)||(num14!= 1 && num14!=0))
mensa = "Check if digits are written correctly( 1 or 0 )"
set(CodHam.msj, 'String', mensa);
set(CodHam.N1, 'String',"0");
set(CodHam.N2, 'String',"0");
set(CodHam.N3, 'String',"0");
set(CodHam.N4, 'String',"0");
set(CodHam.N5, 'String',"0");
set(CodHam.N6, 'String',"0");
set(CodHam.N7, 'String',"0");
set(CodHam.N8, 'String',"0");
set(CodHam.N9, 'String',"0");
set(CodHam.N10, 'String',"0");
set(CodHam.N11, 'String',"0");
writeDigitalPin(a,"d13",0);
writeDigitalPin(a,"d12",0);
writeDigitalPin(a,"d11",0);
writeDigitalPin(a,"d10",0);
writeDigitalPin(a,"d9",0);
writeDigitalPin(a,"d8",0);
writeDigitalPin(a,"d7",0);
writeDigitalPin(a,"d6",0);
writeDigitalPin(a,"d5",0);
writeDigitalPin(a,"d4",0);
writeDigitalPin(a,"d3",0);

else
msg = "Code is written correctly! :)"
set(CodHam.msj,'String',msg);

%N1, N2, N4, N8 ? paridad ?B1, B2, B3, B4
B1= xor(xor(xor(xor(num2, num4),num8),num10),num14);
B2= xor(xor(xor(xor(num2,num6),num8),num12),num14);
B3= xor(xor(num4,num6),num8);
B4= xor(xor(num10,num12),num14);

writeDigitalPin(a,"d13",num14); %
writeDigitalPin(a,"d12",num12);
writeDigitalPin(a,"d11",num10);
writeDigitalPin(a,"d10",B4); %
writeDigitalPin(a,"d9",num8);
writeDigitalPin(a,"d8",num6);
writeDigitalPin(a,"d7",num4);
writeDigitalPin(a,"d6",B3); %
writeDigitalPin(a,"d5",num2);
writeDigitalPin(a,"d4",B2); %
writeDigitalPin(a,"d3",B1); %

par1= num2str(B1);
set(CodHam.N1,'String',par1);
par2= num2str(B2);
set(CodHam.N2,'String',par2);
par4= num2str(B3);
set(CodHam.N4,'String',par4);
par8= num2str(B4);
set(CodHam.N8,'String',par8);

dat1 = num2str(num2);%recibe num de dato anterior
set(CodHam.N3, 'String', dat1);%devuelve num
dat2 = num2str(num4)
set(CodHam.N5, 'String', dat2);
dat3 = num2str(num6)
set(CodHam.N6, 'String', dat3);
dat4 = num2str(num8)
set(CodHam.N7, 'String', dat4);
dat5 = num2str(num10)
set(CodHam.N9, 'String', dat5);
dat6 = num2str(num12)
set(CodHam.N10, 'String', dat6);
dat7 = num2str(num14)
set(CodHam.N11, 'String', dat7);

R1=str2num(dat1);
R2=str2num(dat2);
R3=str2num(dat3);
R4=str2num(dat4);
R5=str2num(dat5);
R6=str2num(dat6);
R7=str2num(dat7);

P1=str2num(par1);
P2=str2num(par2);
P4=str2num(par4);
P8=str2num(par8);

endif
end

 
## @deftypefn  {} {@var{ret} = } show_CodHam()
##
## Create windows controls over a figure, link controls with callbacks and return 
## a window struct representation.
##
## @end deftypefn
function ret = show_CodHam()
  _scrSize = get(0, "screensize");
  _xPos = (_scrSize(3) - 639)/2;
  _yPos = (_scrSize(4) - 312)/2;
   CodHam = figure ( ... 
	'Color', [0.976 0.957 0.961], ...
	'Position', [_xPos _yPos 639 312], ...
	'resize', 'off', ...
	'windowstyle', 'normal', ...
	'MenuBar', 'none');
	 set(CodHam, 'visible', 'off');
  Button_1 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','pushbutton', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.784 0.722 0.859], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Consolas', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'ForegroundColor', [0.439 0.345 0.486], ... 
	'Position', [186 140 266 32], ... 
	'String', 'Generar', ... 
	'TooltipString', '');
  D1 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [168 200 35 22], ... 
	'String', '', ... 
	'TooltipString', '');
  D2 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [213 200 34 22], ... 
	'String', '', ... 
	'TooltipString', '');
  D3 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [258 200 34 22], ... 
	'String', '', ... 
	'TooltipString', '');
  D4 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [303 200 34 22], ... 
	'String', '', ... 
	'TooltipString', '');
  D5 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [348 200 34 22], ... 
	'String', '', ... 
	'TooltipString', '');
  D6 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [393 200 34 22], ... 
	'String', '', ... 
	'TooltipString', '');
  D7 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [438 200 33 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N1 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [50 40 38 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N2 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [100 40 38 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N3 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [150 40 39 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N4 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [200 40 39 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N5 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [250 40 39 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N6 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [300 40 39 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N7 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [350 40 39 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N8 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [400 40 39 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N9 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [450 40 39 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N10 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [500 40 39 22], ... 
	'String', '', ... 
	'TooltipString', '');
  N11 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [1.000 1.000 1.000], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Arial', ... 
	'FontSize', 10, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [550 40 39 22], ... 
	'String', '', ... 
	'TooltipString', '');
  msj = uicontrol( ...
	'parent',CodHam, ... 
	'Style','edit', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.976 0.957 0.961], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Consolas', ... 
	'FontSize', 9, 'FontUnits', 'points', ... 
	'FontWeight', 'normal', ... 
	'ForegroundColor', [0.000 0.000 0.000], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [94 85 444 22], ... 
	'String', '', ... 
	'TooltipString', '');
  Label_4 = uicontrol( ...
	'parent',CodHam, ... 
	'Style','text', ... 
	'Units', 'pixels', ... 
	'BackgroundColor', [0.976 0.957 0.961], ... 
	'FontAngle', 'normal', ... 
	'FontName', 'Consolas', ... 
	'FontSize', 13, 'FontUnits', 'points', ... 
	'FontWeight', 'bold', ... 
	'ForegroundColor', [0.439 0.345 0.486], ... 
	'HorizontalAlignment', 'center', ... 
	'Position', [198 247 243 20], ... 
	'String', 'Generador de codigo Hamming', ... 
	'TooltipString', '');

  CodHam = struct( ...
      'figure', CodHam, ...
      'Button_1', Button_1, ...
      'D1', D1, ...
      'D2', D2, ...
      'D3', D3, ...
      'D4', D4, ...
      'D5', D5, ...
      'D6', D6, ...
      'D7', D7, ...
      'N1', N1, ...
      'N2', N2, ...
      'N3', N3, ...
      'N4', N4, ...
      'N5', N5, ...
      'N6', N6, ...
      'N7', N7, ...
      'N8', N8, ...
      'N9', N9, ...
      'N10', N10, ...
      'N11', N11, ...
      'msj', msj, ...
      'Label_4', Label_4);


  set (Button_1, 'callback', {@Button_1_doIt, CodHam});
  dlg = struct(CodHam);

%
% El código fuente escrito aquí será ejecutado cuando
% la ventana se haga visible. Funciona como el evento 'onLoad' de otros lenguajes.

  set(CodHam.figure, 'visible', 'on');
  ret = CodHam;
end

